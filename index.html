<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>首页</title>
  
    <meta name="author" content="pokerG Hao">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/twitter/stylesheets/bootstrap.min.css" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/stylesheets/style.css" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/widgets/google_prettify/stylesheets/twitter-bootstrap.css" type="text/css" rel="stylesheet" media="all">
 

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">pokerG</a>
          <ul class="nav">
            
              


  <li><a href="/archive">Archive</a></li>


            
              


  <li><a href="/tags">Tags</a></li>


            
              


  <li><a href="/categories">Categories</a></li>


            
              


  <li><a href="/pages">Pages</a></li>


            
              


  <li><a href="/about">About Me</a></li>


            
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        
<div class="page-header">
  <h1>首页 </h1>
</div>

<div class="row">
  <div class="span12">
    



<h2>最近更新</h2>


<div class="post">
  <h3 class="title"><a href="/Philosophy/%E6%8D%AD%E9%98%96--%E9%AC%BC%E8%B0%B7%E5%AD%90%E5%BC%80%E7%AF%87/">捭阖--鬼谷子开篇</a> <span class="date">2013-11-08</span></h3>

  <p>&emsp;&emsp;《捭阖》作为《鬼谷子》的首篇，它的地位是无需多言的。它不仅是种纵横术，更是《鬼谷子》的提纲和思想的核心。</p>

<p>&emsp;&emsp;开篇“观阴阳之开阖以命物，知存亡之门户”，便把捭阖提到至高无上的地位。捭，开也，阳也；阖，闭也，阴也。它与中国最古老的哲学易经是相符的。</p>

<p>&emsp;&emsp;&ldquo;离合有守，先从其志&rdquo;这句可以算是全文的一个核心。进行任何纵横术的根本点是要守住，即首先抓住对方的思想。这也是”存亡之门户“之所在。</p>

<p>&emsp;&emsp;”即欲捭之，贵周；即欲阖之，贵密“这点出了进行捭阖的前提。周详考虑，藏而不露，巧妙运用，合乎道矣。</p>

<p>&emsp;&emsp;&ldquo;口者，心之门户也，心者，神之主也”。人的种种情感，思维谋略等等皆由此两者表现。“故关之以捭阖，制之以出入。”</p>

<p>&emsp;&emsp;关于捭阖，鬼谷子强调了几点：1.物分阴阳。阳即开始，阴即终结。用有利来开启谈话，用不利来制止其谋略。2.”与阳言者，依崇高。与阴言者，依卑小“，通俗来讲就是见人说人话，见鬼说鬼话。</p>

<p>&emsp;&emsp;捭阖的关键在于隐藏自己的观点，诱出对方的观点，从而对症下药。</p>

<p>&emsp;&emsp;《鬼谷子》这本书可以说思想极为深邃，《捭阖》这篇变化无穷，正如其所言。字字千钧，读完回味无穷。本人浅陋，只能理解到这里。</p>


  <div class="more">
    <a href="/Philosophy/%E6%8D%AD%E9%98%96--%E9%AC%BC%E8%B0%B7%E5%AD%90%E5%BC%80%E7%AF%87/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/ACM/%E4%BA%8C%E5%8F%89%E6%A0%91--C%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/">二叉树--C语言实现</a> <span class="date">2013-11-08</span></h3>

  <p>&emsp;&emsp;数据结构的作业，把二叉树的链表实现还有各种序的线索二叉树的实现做了一遍。</p>

<p>&emsp;&emsp;<strong>bianryTree.h</strong></p>

<pre><code>/*
    @pokerG
    This head file define the struct of binaryTree
    and some basic operation in binaryTree
*/
#ifndef _BINARYTREE_H
#define _BINARYTREE_H
typedef char TElemType;
const int MAXLENGTH = 100;
typedef struct node *treePtr;   //the pointer of tree node
struct node{    //the struct of tree node
    TElemType data;
    bool ltag,rtag;
    treePtr lchild,rchild;
};
</code></pre>


  <div class="more">
    <a href="/ACM/%E4%BA%8C%E5%8F%89%E6%A0%91--C%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/Programming Language/Go%E7%AE%80%E5%8D%95%E7%9A%84%E4%B8%8B%E8%BD%BD%E5%99%A8%E5%AE%9E%E7%8E%B0/">Go简单的下载器实现</a> <span class="date">2013-10-30</span></h3>

  <p>&emsp;&emsp;用Go来实现下载功能还是很简单的。直接看代码吧</p>

<pre><code>func download(url string){
    resp,err := http.Get(url)
    handleErr(err)
    defer resp.Body.Close()
    body,err := ioutil.ReadAll(resp.Body)
    handleErr(err)
    err := ioutil.WriteFile(&quot;./test&quot;,body,0666)
    handleErr(err)
}
</code></pre>

<p>&emsp;&emsp;核心部分就如此简单，剩下的就自己发挥啦。 比如断点续传什么的。</p>


  <div class="more">
    <a href="/Programming Language/Go%E7%AE%80%E5%8D%95%E7%9A%84%E4%B8%8B%E8%BD%BD%E5%99%A8%E5%AE%9E%E7%8E%B0/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/Programming Language/%E5%B0%86json%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5mongodb--goruntine/">将json文件导入mongodb--goruntine</a> <span class="date">2013-10-21</span></h3>

  <p>&emsp;&emsp;接着上次的，因为数据比较大，单线程的话，速度实在不能忍，所以就要使用goruntine。</p>

<p>&emsp;&emsp;我们首先要看是哪里的速度过慢，从程序我们就可以看出主要是三个点：1.文件读取；2.正则表达式的处理；3.写入mongodb。所以就测试了一下，文件读取大约是几百毫秒，正则表达式的处理大约在2秒到4秒，而写入mongodb随文件的大小以及系统的情况，大约也是3到5秒，最慢能到10多秒。</p>

<p>&emsp;&emsp;文件读取速度对整体影响不大，所以没必要再优化，而正则表达式使用的Go自带的引擎，所以，只有第三项可以做些什么，而且也就是它耗时最多。</p>

<p>&emsp;&emsp; 因为我们是要处理一系列文件，所以这里就有了两种思路，第一种是每个文件的处理用一个goruntine，第二种是在写入mongodb时，每条记录使用一个goruntine。（当然更好是设计两层模型,还没有尝试，就不说了。）。</p>

<p>&emsp;&emsp;首先，我们来看看第二种，</p>

<pre><code>chs = make([]chan int, len(sdata))

for i, s := range chs {
    chs[i] = make(chan int)
    go func(s string, i int) {
        var inter interface{}
            err := json.Unmarshal([]byte(s), &amp;inter)
            handleError(err)
            err = c.Insert(inter)
            handleError(err)
        chs[i] &lt;- 1
    }(s, i)
}
for i, ch := range chs {
    &lt;-ch
    fmt.Print(i, &quot;,&quot;)
}
</code></pre>


  <div class="more">
    <a href="/Programming Language/%E5%B0%86json%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5mongodb--goruntine/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/Programming Language/%E5%B0%86json%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5mongodb--Golang%E5%AE%9E%E7%8E%B0/">将json文件导入mongodb--Golang实现</a> <span class="date">2013-10-20</span></h3>

  <p>&emsp;&emsp;使用go语言将json文件导入mongodb中相对还是比较方便的。</p>

<p>&emsp;&emsp;首先 我用的是 mgo 这个 驱动。 其次因为文件是gz压缩 的。所以我们得先解压。使用 go自带的pkg <code>compress/gzip</code> 就行。</p>

<pre><code>fr, err := os.Open(fpath)
handleError(err)
defer fr.Close()

fmt.Println(fr.Name())

gr, err := gzip.NewReader(fr)
handleError(err)
</code></pre>

<p>&emsp;&emsp;正常来说，这里直接 调用 <code>gr.Read()</code>就可以了。。但是由于我的文件比较大，而且 <code>ioutil.ReadAll()</code> 也不行 ，所以这里我使用了循环读入</p>

<pre><code>// 因为 gr一次读入 读满的话是3800 - 4000个字符，
// 所以BUFSIZE = 4000
buf := make([]byte, BUFSIZE)
var data []byte
var num int = 0
for {
    n, err := gr.Read(buf)
    data = append(data, buf[:n]...)
    if err == io.EOF {
        break
    }
    num += n
    handleError(err)
}
</code></pre>


  <div class="more">
    <a href="/Programming Language/%E5%B0%86json%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5mongodb--Golang%E5%AE%9E%E7%8E%B0/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/Programming Language/Go1.2-Release/">Go1.2 Release</a> <span class="date">2013-09-22</span></h3>

  <p>&emsp;&emsp;Go1.2发布了，做了一些调整和改进，这里我就只谈谈几个跟我目前关系比较大的，其他的请去查看[release notes](&ldquo;http://tip.golang.org/doc/go1.2&rdquo;)</p>

<h1>nil 的使用</h1>

<p>&emsp;&emsp;在Go1.0中 例如：</p>

<pre><code>type T struct {
    X [1&lt;&lt;24]byte
    Field int32
}

func main() {
    var x *T
    ...
} 
</code></pre>

<p>&emsp;&emsp;这个nil 指针 x 可以访问非法内存， x.Field 可以访问 1&lt;&lt;24的内存.在Go1.2中 编译器会确保不会错误的使用nil 指针。</p>


  <div class="more">
    <a href="/Programming Language/Go1.2-Release/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/History/%E6%96%87%E6%98%8E%E7%9A%84%E7%BF%85%E8%86%80/">文明的翅膀</a> <span class="date">2013-09-04</span></h3>

  <p>&emsp;&emsp;历史的进程是残酷的。上了“文明毁灭黑名单”的有古埃及，巴比伦，哈拉巴，克里特，奥尔梅克，赫梯，波斯，玛雅等等，不下二三十中。</p>

<p>&emsp;&emsp;绵延不绝的是中华文明起死回生的则是希腊-罗马文明。何以如此？这是一个“斯芬克斯之谜”。易中天在《易中天中华史-奠基人》中揭示了这个谜底。这篇文章虽然观点并不是很新颖，但是从角度上来说，让我读起来感觉很有趣。</p>

<p>&emsp;&emsp;斯芬克斯，是希腊人对狮身人面像的称呼。不过在希腊的斯芬克斯却又两只翅膀。这就比古埃及的那个家伙，显得轻盈娟修。翅膀，是重要的。没有翅膀就不能飞。文明没有翅膀，就只能原地踏步，最终只得陨落。但是怎样飞翔，却要看是什么样的翅膀。</p>

<p>&emsp;&emsp;中华的翅膀，是忧患心理和乐观态度。</p>

<p>&emsp;&emsp;忧患是我们民族文化的底色。从《诗·小雅·小旻》“战战兢兢，如临深渊，如履薄冰“，到孟子的“生于忧患，死于安乐”，再到《义勇军进行曲》，忧患意识贯穿来整个中华史。</p>

<p>&emsp;&emsp;但是我们民族优势乐观的。我们相信“天遂人愿”，相信“善恶有报”，相信“事在人为”。因此，我们“不改其乐”，哪怕“自得其乐”,也总归”乐在其中“。</p>

<p>&emsp;&emsp;一忧一乐，从制度上来说就是有礼有乐。礼就是“理”，伦理，秩序，体现忧患；乐（le）就是“乐”（yue），讲快乐，讲和谐，造就乐观。</p>

<p>&emsp;&emsp;希腊的翅膀，是科学精神和艺术气质。</p>

<p>&emsp;&emsp;希腊人的科学不是实用主义的。他们“为思想而思想，为科学而科学”。所以他们能把埃及人用于测量土地和修建金字塔的技术，变成几何学；也能把巴比伦的占星术，变成天文学。</p>

<p>&emsp;&emsp;与此同时，希腊人又极具艺术气质。正如马克思所说，希腊人是”正常的儿童“，所以”为艺术而艺术，为审美而审美“。这种纯粹，使他们即使在纵欲和淫乐，也毫无负罪感。</p>


  <div class="more">
    <a href="/History/%E6%96%87%E6%98%8E%E7%9A%84%E7%BF%85%E8%86%80/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/Programming Language/jekyllTogor/">jekyllTogor</a> <span class="date">2013-09-03</span></h3>

  <p>&emsp;&emsp;前几天在Github上看到gor——Go编写的静态博客引擎,顿时有了不小的兴趣，就试了一下</p>

<p>&emsp;&emsp;先说说我的感受吧（帮gor做做广告了），首先它的安装真的很简单，作为静态语言，只需要编译成可执行文件就可使用，go的工具链很方便的就能实现，（具体安装方法可以参考它的<a href="https://github.com/wendal/gor">主页</a>.如果你想全局使用的话，将它路径加到$PATH里就行了，这个就不用多说了。当时装jekyll时真是崩溃死了，没学过ruby，先得装ruby，刚开始装的是2.0,然后装jekyll，反正也看不懂，就跟着别人的来，一直出问题，最后用尽各种方法都不行，花了有两个多小时吧，最后灵光一闪，是不是ruby的版本有问题。。然后换成了1.9.3.最后终于成功了。。！！真是崩溃的要死。gor的第二个优点就是速度快，系统级语言确实是不能比的，而且它和jekyll的工作原理不同。这两点我认为是的对新手来说很重要的。</p>

<p>&emsp;&emsp;当然上述其实不是本文的重点（汗。。）。gor 的 元数据 和 jekyll的有点区别。我的Blog虽然不多。但要是一个个手动改的话，也是很麻烦的。作为coder，目的是实现自动化，这种事当然不能这么干，同时也是为了练习Golang，所以就写了个<a href="https://github.com/pokerG/jekyllTogor">脚本</a></p>

<p>&emsp;&emsp;通过写这个脚本，发现了一些问题和情况。好久没有写程序了，手速下降的不行行了。。关键是对Go的不熟练，这个脚本其实是很简单的，但是我写了3个小时把。理论掌握的多，实践少。</p>

<p>&emsp;&emsp;接下来为了改善这种情况，一方面是接着分析Go的标准库，看看Go的创始者的code是怎么写的,这是提高能力的一个关键方法。还有就是练习练习再练习。</p>

<p>&emsp;&emsp;接下来主要先分析这几部分：</p>

<ol>
<li>string</li>
<li>file</li>
<li>regexp</li>
<li>refelect</li>
</ol>


  <div class="more">
    <a href="/Programming Language/jekyllTogor/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/Programming Language/Go%E6%A0%87%E5%87%86%E5%BA%93-bufio/">Go标准库-bufio</a> <span class="date">2013-08-28</span></h3>

  <p>&emsp;&emsp;bufio包实现了带缓存的I/O操作。封装了一个io.Reader或io.Writer对象，返回一个具有缓存和文本读写的对象。</p>

<h1>bufio.go</h1>

<pre><code>//实现了带缓存的
type Reader struct{
        buf          []byte
        rd           io.Reader
        r, w         int
        err          error
        lastByte     int
        lastRuneSize int
}

//NewReaderSize将rd封装成一个具有size大小的bufio.Reader对象
//如果rd的类型就是bufio.Reader且size &gt; minReadBufferSize = 16 直接返回
//size的大小要大于 minReadBufferSize 否则 返回大小为minReadBufferSize的bufio.Reader
func NewReaderSize(rd io.Reader, size int) *Reader
</code></pre>


  <div class="more">
    <a href="/Programming Language/Go%E6%A0%87%E5%87%86%E5%BA%93-bufio/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/Programming Language/Go%E6%A0%87%E5%87%86%E5%BA%93-io-pipe/">Go标准库-io-pipe</a> <span class="date">2013-08-28</span></h3>

  <p>&emsp;&emsp;pipe中基本的struct是 pipe</p>

<pre><code>//pipe 是 PipeReader 和 PipeWriter 的底层实现
type pipe struct {
    //sync.Mutex 是 一个并发时用的锁，这个以后在sync包中会讲到
    //rl/wl 控制同时只有一个读取器或写入器
    rl    sync.Mutex 
    wl    sync.Mutex 
    l     sync.Mutex //用于保护其他字段
    data  []byte     //管道中的数据
    // r/wwait 控制读取器或写入器等待  
    rwait sync.Cond  
    wwait sync.Cond  
    // r/werr 如果读取器（写入器）关闭，该错误会被Write（Read）方法返回
    rerr  error      
    werr  error     
}

//ErrClosePipe 用于返回对于关闭的管道的操作错误
var ErrClosedPipe = errors.New(&quot;io: read/write on closed pipe&quot;)
</code></pre>


  <div class="more">
    <a href="/Programming Language/Go%E6%A0%87%E5%87%86%E5%BA%93-io-pipe/" class="btn">read more..</a>
  </div>
</div>

  </div>
</div>

      </div>

      <footer>
        <p>&copy; pokerG Hao 2013 
          with help from <a href="http://github.com/wendal/gor" target="_blank" title="Gor -- Fast Blog">Gor</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
		  and Idea from <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
        </p>
      </footer>

    </div> <!-- /container -->

    
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>

    
<script type="text/javascript">

  var _gaq = _gaq || [];
  var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-123-12']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  </body>
</html>
